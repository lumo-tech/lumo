<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lumo.utils package &mdash; lumo 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            lumo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/getting_start.html">Getting Start</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">lumo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">lumo.utils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lumo.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lumo-utils-package">
<h1>lumo.utils package<a class="headerlink" href="#lumo-utils-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-lumo.utils.ast">
<span id="lumo-utils-ast-module"></span><h2>lumo.utils.ast module<a class="headerlink" href="#module-lumo.utils.ast" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.ast.analyse_module_dependency">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.ast.</span></span><span class="sig-name descname"><span class="pre">analyse_module_dependency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.ast.analyse_module_dependency" title="Permalink to this definition"></a></dt>
<dd><p>Recursively analyse the dependencies of a module and return a dictionary of modules and their associated files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module</strong> (<em>module</em>) – The module to analyse.</p></li>
<li><p><strong>mem</strong> (<em>dict</em><em>, </em><em>optional</em>) – A dictionary of previously analysed modules and their associated files.</p></li>
<li><p><strong>root</strong> (<em>str</em><em>, </em><em>optional</em>) – The root directory to use as a reference when determining whether a file is a dependency.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of modules and their associated files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.cache">
<span id="lumo-utils-cache-module"></span><h2>lumo.utils.cache module<a class="headerlink" href="#module-lumo.utils.cache" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.cache.cache">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.cache.</span></span><span class="sig-name descname"><span class="pre">cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_function</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.cache.cache" title="Permalink to this definition"></a></dt>
<dd><p>Simple lightweight unbounded cache.  Sometimes called “memoize”.</p>
</dd></dl>

</section>
<section id="module-lumo.utils.device">
<span id="lumo-utils-device-module"></span><h2>lumo.utils.device module<a class="headerlink" href="#module-lumo.utils.device" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.device.honor_type">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.device.</span></span><span class="sig-name descname"><span class="pre">honor_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generator</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.device.honor_type" title="Permalink to this definition"></a></dt>
<dd><p>Cast a generator to the same type as obj (list, tuple, or namedtuple)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.device.is_torch_tensor">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.device.</span></span><span class="sig-name descname"><span class="pre">is_torch_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.device.is_torch_tensor" title="Permalink to this definition"></a></dt>
<dd><p>Check if the input is a PyTorch tensor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tensor</strong> – The input tensor.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean indicating if the input is a PyTorch tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.device.recursively_apply">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.device.</span></span><span class="sig-name descname"><span class="pre">recursively_apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_type=&lt;function</span> <span class="pre">is_torch_tensor&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_on_other_type=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.device.recursively_apply" title="Permalink to this definition"></a></dt>
<dd><p>Recursively apply a function on a data structure that is a nested list/tuple/dictionary of a given base type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<code class="docutils literal notranslate"><span class="pre">callable</span></code>) – The function to recursively apply.</p></li>
<li><p><strong>data</strong> (nested list/tuple/dictionary of <code class="docutils literal notranslate"><span class="pre">main_type</span></code>) – The data on which to apply <code class="docutils literal notranslate"><span class="pre">func</span></code></p></li>
<li><p><strong>*args</strong> – <p>Positional arguments that will be passed to <code class="docutils literal notranslate"><span class="pre">func</span></code> when applied on the unpacked data.</p>
</p></li>
<li><p><strong>main_type</strong> (<code class="docutils literal notranslate"><span class="pre">type</span></code>, <em>optional</em>, defaults to <code class="docutils literal notranslate"><span class="pre">torch.Tensor</span></code>) – The base type of the objects to which apply <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p></li>
<li><p><strong>error_on_other_type</strong> – Whether to return an error or not if after unpacking <code class="docutils literal notranslate"><span class="pre">data</span></code>, we get on an object that is not of type</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">main_type</span></code>. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, the function will leave objects of types different than <code class="docutils literal notranslate"><span class="pre">main_type</span></code> unchanged.
:type error_on_other_type: <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <em>optional</em>, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>
:param <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs: Keyword arguments that will be passed to <code class="docutils literal notranslate"><span class="pre">func</span></code> when applied on the unpacked data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The same data structure as <code class="docutils literal notranslate"><span class="pre">data</span></code> with <code class="docutils literal notranslate"><span class="pre">func</span></code> applied to every object of type <code class="docutils literal notranslate"><span class="pre">main_type</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.device.send_to_device">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.device.</span></span><span class="sig-name descname"><span class="pre">send_to_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.device.send_to_device" title="Permalink to this definition"></a></dt>
<dd><p>Recursively sends the elements in a nested list/tuple/dictionary of tensors to a given device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> (nested list/tuple/dictionary of <code class="docutils literal notranslate"><span class="pre">torch.Tensor</span></code>) – The data to send to a given device.</p></li>
<li><p><strong>device</strong> (<code class="docutils literal notranslate"><span class="pre">torch.device</span></code>) – The device to send the data to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The same data structure as <code class="docutils literal notranslate"><span class="pre">tensor</span></code> with all tensors sent to the proper device.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.exithook">
<span id="lumo-utils-exithook-module"></span><h2>lumo.utils.exithook module<a class="headerlink" href="#module-lumo.utils.exithook" title="Permalink to this heading"></a></h2>
<p>This module provides functions to wrap or replace the default exception handler of Python’s sys module.</p>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.exithook.replace">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.exithook.</span></span><span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.exithook.replace" title="Permalink to this definition"></a></dt>
<dd><p>Replace the default exception handler with the provided function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.exithook.wrap_after">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.exithook.</span></span><span class="sig-name descname"><span class="pre">wrap_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.exithook.wrap_after" title="Permalink to this definition"></a></dt>
<dd><p>Wrap the default exception handler, executing the provided function after it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.exithook.wrap_before">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.exithook.</span></span><span class="sig-name descname"><span class="pre">wrap_before</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.exithook.wrap_before" title="Permalink to this definition"></a></dt>
<dd><p>Wrap the default exception handler, executing the provided function before it.</p>
</dd></dl>

</section>
<section id="module-lumo.utils.filelock">
<span id="lumo-utils-filelock-module"></span><h2>lumo.utils.filelock module<a class="headerlink" href="#module-lumo.utils.filelock" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.filelock.Lock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.filelock.</span></span><span class="sig-name descname"><span class="pre">Lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.filelock.Lock" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for obtaining and releasing file-based locks using FileLock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – The name of the lock.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.filelock.Lock.fn">
<span class="sig-name descname"><span class="pre">fn</span></span><a class="headerlink" href="#lumo.utils.filelock.Lock.fn" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The file path of the lock file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.filelock.Lock.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><a class="headerlink" href="#lumo.utils.filelock.Lock.lock" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The FileLock object used for obtaining and releasing the lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileLock</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>lock = Lock(‘my_lock’)
lock.abtain()</p>
<section id="critical-section">
<h3>critical section<a class="headerlink" href="#critical-section" title="Permalink to this heading"></a></h3>
<p>lock.release()</p>
<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.filelock.Lock.abtain">
<span class="sig-name descname"><span class="pre">abtain</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.filelock.Lock.abtain" title="Permalink to this definition"></a></dt>
<dd><p>Acquire the lock</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.filelock.Lock.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.filelock.Lock.release" title="Permalink to this definition"></a></dt>
<dd><p>Release the lock</p>
</dd></dl>

</section>
</dd></dl>

</section>
<section id="module-lumo.utils.fmt">
<span id="lumo-utils-fmt-module"></span><h2>lumo.utils.fmt module<a class="headerlink" href="#module-lumo.utils.fmt" title="Permalink to this heading"></a></h2>
<p>Format date/filename, check array shape, convert item from torch.Tensor to ndarray or scalar.</p>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.can_be_filename">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">can_be_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.can_be_filename" title="Permalink to this definition"></a></dt>
<dd><p>Check whether a basename can be converted to a valid filename.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.detach">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">detach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.detach" title="Permalink to this definition"></a></dt>
<dd><p>Detach a PyTorch tensor and convert it to a NumPy ndarray.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.format_second">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">format_second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#lumo.utils.fmt.format_second" title="Permalink to this definition"></a></dt>
<dd><p>Formats a duration given in seconds into a human-readable string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sec</strong> – the duration in seconds.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A human-readable string representing the duration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.format_timedelta">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">format_timedelta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">td</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">timedelta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#lumo.utils.fmt.format_timedelta" title="Permalink to this definition"></a></dt>
<dd><p>Formats a timedelta object into a human-readable string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>td</strong> – a timedelta object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A human-readable string representing the timedelta.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.indent_print">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">indent_print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160;&#160;&#160; <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.indent_print" title="Permalink to this definition"></a></dt>
<dd><p>Prints the specified text with a given indentation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.is_scalar">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">is_scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ndarray</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.is_scalar" title="Permalink to this definition"></a></dt>
<dd><p>Check whether a numpy array is a scalar.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.strftime">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">strftime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%y-%m-%d-%H%M%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dateobj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.strftime" title="Permalink to this definition"></a></dt>
<dd><p>get current date with formatted</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.strptime">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">strptime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datestr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%y-%m-%d-%H%M%S'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.strptime" title="Permalink to this definition"></a></dt>
<dd><p>Convert a string to a datetime object using the specified format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.to_filename">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">to_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.to_filename" title="Permalink to this definition"></a></dt>
<dd><p>Replace invalid characters in a basename with an underscore.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.to_ndarray">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">to_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.to_ndarray" title="Permalink to this definition"></a></dt>
<dd><p>Convert a PyTorch tensor or any other array-like object to a NumPy ndarray.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.fmt.validate_scalar_shape">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.fmt.</span></span><span class="sig-name descname"><span class="pre">validate_scalar_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.fmt.validate_scalar_shape" title="Permalink to this definition"></a></dt>
<dd><p>Validate that a given numpy array is a scalar.</p>
</dd></dl>

</section>
<section id="module-lumo.utils.logger">
<span id="lumo-utils-logger-module"></span><h2>lumo.utils.logger module<a class="headerlink" href="#module-lumo.utils.logger" title="Permalink to this heading"></a></h2>
<p>used for logging</p>
<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.logger.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A logger adapted for deep learning training experiments that can print output without a newline and
adds process index in distributed training.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.VERBOSE">
<span class="sig-name descname"><span class="pre">VERBOSE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.VERBOSE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.VVV_DEBUG">
<span class="sig-name descname"><span class="pre">VVV_DEBUG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-10</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.VVV_DEBUG" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.VV_DEBUG">
<span class="sig-name descname"><span class="pre">VV_DEBUG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.VV_DEBUG" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.V_DEBUG">
<span class="sig-name descname"><span class="pre">V_DEBUG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.V_DEBUG" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.V_ERROR">
<span class="sig-name descname"><span class="pre">V_ERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">40</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.V_ERROR" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.V_FATAL">
<span class="sig-name descname"><span class="pre">V_FATAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.V_FATAL" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.V_INFO">
<span class="sig-name descname"><span class="pre">V_INFO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.V_INFO" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.V_WARN">
<span class="sig-name descname"><span class="pre">V_WARN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#lumo.utils.logger.Logger.V_WARN" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.add_log_dir">
<span class="sig-name descname"><span class="pre">add_log_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.add_log_dir" title="Permalink to this definition"></a></dt>
<dd><p>add a file output pipeline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.add_log_listener">
<span class="sig-name descname"><span class="pre">add_log_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.add_log_listener" title="Permalink to this definition"></a></dt>
<dd><p>add a log event handler</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.dddebug">
<span class="sig-name descname"><span class="pre">dddebug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.dddebug" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘DEBUG’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.ddebug">
<span class="sig-name descname"><span class="pre">ddebug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.ddebug" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘DEBUG’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.debug" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘DEBUG’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.error">
<span class="sig-name descname"><span class="pre">error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.error" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘ERROR’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.fatal">
<span class="sig-name descname"><span class="pre">fatal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.fatal" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘FATAL’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.info" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘INFO’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.inline">
<span class="sig-name descname"><span class="pre">inline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.inline" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘INFO’ inline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.newline">
<span class="sig-name descname"><span class="pre">newline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.newline" title="Permalink to this definition"></a></dt>
<dd><p>break line</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end='\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.print" title="Permalink to this definition"></a></dt>
<dd><p>built-in print function</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.print_rich">
<span class="sig-name descname"><span class="pre">print_rich</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end='\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.print_rich" title="Permalink to this definition"></a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Prints</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">arguments</span> <span class="n">to</span> <span class="n">the</span> <span class="n">given</span> <span class="n">file</span> <span class="nb">object</span><span class="p">,</span> <span class="n">using</span> <span class="n">rich</span> <span class="n">formatting</span> <span class="k">if</span> <span class="n">available</span><span class="o">.</span>

<span class="n">Args</span><span class="p">:</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">The</span> <span class="n">arguments</span> <span class="n">to</span> <span class="n">be</span> <span class="n">printed</span><span class="o">.</span>
    <span class="n">end</span><span class="p">:</span> <span class="n">The</span> <span class="n">string</span> <span class="n">to</span> <span class="n">append</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">printed</span> <span class="n">output</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="s1">&#39;</span>
</pre></div>
</div>
<p>‘).
file: The file object to which the output should be directed (default: sys.stdout).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Returns</span><span class="p">:</span>
    <span class="kc">None</span>

<span class="n">Raises</span><span class="p">:</span>
    <span class="n">N</span><span class="o">/</span><span class="n">A</span>

<span class="n">Notes</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">If</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_stdout</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">rich</span> <span class="n">formatting</span> <span class="ow">is</span> <span class="n">available</span><span class="p">,</span> <span class="n">the</span> <span class="n">output</span> <span class="n">will</span> <span class="n">be</span> <span class="n">formatted</span> <span class="n">using</span> <span class="n">rich</span><span class="o">.</span>
    <span class="o">-</span> <span class="n">If</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_stdout</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">rich</span> <span class="n">formatting</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span><span class="p">,</span> <span class="n">the</span> <span class="n">output</span> <span class="n">will</span> <span class="n">be</span> <span class="n">printed</span> <span class="n">using</span> <span class="n">the</span> <span class="n">default</span> <span class="nb">print</span> <span class="n">function</span><span class="o">.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.raw" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘INFO’ withou datetime prefix</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.set_verbose">
<span class="sig-name descname"><span class="pre">set_verbose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.set_verbose" title="Permalink to this definition"></a></dt>
<dd><p>set log verbose, default level is <code class="docutils literal notranslate"><span class="pre">INFO</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.toggle_stdout">
<span class="sig-name descname"><span class="pre">toggle_stdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.toggle_stdout" title="Permalink to this definition"></a></dt>
<dd><p>False will stop write on stdout</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.logger.Logger.warn">
<span class="sig-name descname"><span class="pre">warn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.Logger.warn" title="Permalink to this definition"></a></dt>
<dd><p>Log a message with severity ‘WARN’</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.logger.get_global_logger">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.logger.</span></span><span class="sig-name descname"><span class="pre">get_global_logger</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.get_global_logger" title="Permalink to this definition"></a></dt>
<dd><p>Returns the global logger object, creating it if it does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The global logger object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>logging.Logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.logger.loginfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.logger.</span></span><span class="sig-name descname"><span class="pre">loginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_len</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.loginfo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.loginfo.prefix_len">
<span class="sig-name descname"><span class="pre">prefix_len</span></span><a class="headerlink" href="#lumo.utils.logger.loginfo.prefix_len" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.logger.loginfo.string">
<span class="sig-name descname"><span class="pre">string</span></span><a class="headerlink" href="#lumo.utils.logger.loginfo.string" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.logger.process_str">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.logger.</span></span><span class="sig-name descname"><span class="pre">process_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.process_str" title="Permalink to this definition"></a></dt>
<dd><p>Returns a string representing the current process, suitable for use in log messages or other output.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A string representing the current process. If running in a distributed context (as determined
    by `is_dist()`), the string will be of the form &#39;[local_rank]&#39;, where &#39;local_rank&#39; is the local
    rank of the current process. Otherwise, an empty string will be returned.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.logger.set_global_logger">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.logger.</span></span><span class="sig-name descname"><span class="pre">set_global_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.logger.set_global_logger" title="Permalink to this definition"></a></dt>
<dd><p>Sets the global logger object to the specified logger instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> – The logger instance to set as the global logger. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,</p>
</dd>
</dl>
<p>a new logger instance will be created. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
:type <a href="#id5"><span class="problematic" id="id6">logger_</span></a>: logging.Logger, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The global logger object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>logging.Logger</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.memory_grab">
<span id="lumo-utils-memory-grab-module"></span><h2>lumo.utils.memory_grab module<a class="headerlink" href="#module-lumo.utils.memory_grab" title="Permalink to this heading"></a></h2>
<p>A hack function to monitor GPU memory usage, then occupy its access.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.memory_grab.</span></span><span class="sig-name descname"><span class="pre">DeviceMem</span></span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that represents device memory usage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem.get_device_mem">
<span class="sig-name descname"><span class="pre">get_device_mem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem.get_device_mem" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total amount of memory (in MiB) on a specified device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>torch.device</em>) – Device ID or name to look up.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Total amount of memory (in MiB) on the specified device.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem.get_device_release_mem">
<span class="sig-name descname"><span class="pre">get_device_release_mem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem.get_device_release_mem" title="Permalink to this definition"></a></dt>
<dd><p>Returns the amount of free memory (in MiB) on a specified device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>torch.device</em>) – Device ID or name to look up.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Amount of free memory (in MiB) on the specified device.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem.get_pid_device_mem">
<span class="sig-name descname"><span class="pre">get_pid_device_mem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem.get_pid_device_mem" title="Permalink to this definition"></a></dt>
<dd><p>Attempts to obtain the memory usage (in MiB) for a specific process running on a specific device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pid</strong> (<em>int</em>) – Process ID to look up.</p></li>
<li><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>torch.device</em>) – Device ID or name to look up.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Memory usage in MiB for the specified process and device if found, -1 otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem.re_parse">
<span class="sig-name descname"><span class="pre">re_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem.re_parse" title="Permalink to this definition"></a></dt>
<dd><p>Parses memory usage (in MiB) for a process running on a specific device by searching through the list of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of strings to parse.</p></li>
<li><p><strong>pid</strong> (<em>int</em>) – Process ID to look for.</p></li>
<li><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>torch.device</em>) – Device ID to look for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Memory usage in MiB for the specified process and device if found, 0 otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.DeviceMem.try_parse">
<span class="sig-name descname"><span class="pre">try_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.DeviceMem.try_parse" title="Permalink to this definition"></a></dt>
<dd><p>Attempts to parse memory usage (in MiB) for a process running on a specific device using the cached line ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of strings to parse.</p></li>
<li><p><strong>pid</strong> (<em>int</em>) – Process ID to look for.</p></li>
<li><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>torch.device</em>) – Device ID to look for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Memory usage in MiB for the specified process and device if found, -1 otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.memory_grab.</span></span><span class="sig-name descname"><span class="pre">memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invade</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A graceful memory allocator that optimizes GPU memory allocation by incrementally increasing the memory
footprint to minimize fragmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>memory</strong> (<em>int</em>) – Memory size to be allocated in MB.</p></li>
<li><p><strong>device</strong> (<em>str</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – Device to allocate memory on. Defaults to the current CUDA device.</p></li>
<li><p><strong>hold</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to hold the memory after allocation. Defaults to False.</p></li>
<li><p><strong>invade</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use aggressive memory allocation. Defaults to False.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p>To get GPU memory usage, we use nvidia-smi. Refer to this link for details:
<a class="reference external" href="https://github.com/pytorch/pytorch/issues/12873">https://github.com/pytorch/pytorch/issues/12873</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.copy" title="Permalink to this definition"></a></dt>
<dd><p>Copy memory allocation parameters from another process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pid</strong> (<em>int</em>) – Process ID to copy memory parameters from.</p></li>
<li><p><strong>wait</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to wait until the other process has finished before starting allocation.</p></li>
<li><p><strong>True.</strong> (<em>Defaults to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.end">
<span class="sig-name descname"><span class="pre">end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.end" title="Permalink to this definition"></a></dt>
<dd><p>Release allocated memory and empty the CUDA cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.hold_current">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hold_current</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.hold_current" title="Permalink to this definition"></a></dt>
<dd><p>Hold the currently allocated memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.immediately">
<span class="sig-name descname"><span class="pre">immediately</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pre_init</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.immediately" title="Permalink to this definition"></a></dt>
<dd><p>Wait until there is enough memory available, then allocate the necessary memory.
This is the recommended way to allocate memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pre_init</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to initialize CUDA (which will consume a certain amount of memory)</p></li>
<li><p><strong>False</strong> (<em>before allocating. Defaults to</em>) – </p></li>
<li><p><strong>is</strong> (<em>meaning memory will only be allocated after enough memory</em>) – </p></li>
<li><p><strong>processes.</strong> (<em>released by other</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.invade">
<span class="sig-name descname"><span class="pre">invade</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.invade" title="Permalink to this definition"></a></dt>
<dd><p>Aggressively allocate memory, increasing the memory footprint until the necessary amount is allocated.
This method is not recommended.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>unit</strong> (<em>int</em><em>, </em><em>optional</em>) – Incremental size of memory allocation (in MB). Defaults to 5.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">immediately</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.start" title="Permalink to this definition"></a></dt>
<dd><p>Start memory allocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>immediately</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use the recommended memory allocation method.</p></li>
<li><p><strong>True.</strong> (<em>Defaults to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.memory_grab.memory.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.memory_grab.memory.wait" title="Permalink to this definition"></a></dt>
<dd><p>Wait for the other process to finish before starting allocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pid</strong> (<em>int</em>) – Process ID to wait for.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-lumo.utils.random">
<span id="lumo-utils-random-module"></span><h2>lumo.utils.random module<a class="headerlink" href="#module-lumo.utils.random" title="Permalink to this heading"></a></h2>
<p>Methods about random</p>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.fix_cuda">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">fix_cuda</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.fix_cuda" title="Permalink to this definition"></a></dt>
<dd><p>Set deterministic and reproducible configuration for CUDA.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.fix_seed">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">fix_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.fix_seed" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seed</strong> – </p>
</dd>
</dl>
<p>Returns:</p>
<p class="rubric">Notes</p>
<p>When use dataloader and its num_workers is bigger than one, the final results may can’t be the same cased by multithread.</p>
<p>[2023.02.22] Currently (as MPS support is quite new) there is no way to set the seed for MPS directly.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.get_state">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cuda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.get_state" title="Permalink to this definition"></a></dt>
<dd><p>Get the current state of the random number generators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cuda</strong> (<em>bool</em>) – Whether to get the CUDA state if PyTorch is using CUDA.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary containing the current states of the random number generators for</p>
</dd>
</dl>
<p>numpy, pytorch, pytorch.cuda, and python’s built-in <code class="docutils literal notranslate"><span class="pre">random</span></code> module.
:rtype: dict</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.hashseed">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">hashseed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hashitem</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.hashseed" title="Permalink to this definition"></a></dt>
<dd><p>Generate a hash seed from a given integer or string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hashitem</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – The integer or string to generate the hash seed from.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The hash seed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the given <code class="docutils literal notranslate"><span class="pre">hashitem</span></code> is not an integer or a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.int_time">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">int_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.int_time" title="Permalink to this definition"></a></dt>
<dd><p>Get the current time as an integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The current time as an integer.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.random.set_state">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.random.</span></span><span class="sig-name descname"><span class="pre">set_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.random.set_state" title="Permalink to this definition"></a></dt>
<dd><p>Set the random state for NumPy, PyTorch, PyTorch CUDA, and Python’s built-in <code class="docutils literal notranslate"><span class="pre">random</span></code> module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state_dict</strong> (<em>dict</em>) – A dictionary containing the desired states of the random number generators for NumPy, PyTorch, PyTorch CUDA, and Python’s built-in <code class="docutils literal notranslate"><span class="pre">random</span></code> module.</p></li>
<li><p><strong>cuda</strong> (<em>bool</em>) – Whether to set the CUDA state if PyTorch is using CUDA.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.repository">
<span id="lumo-utils-repository-module"></span><h2>lumo.utils.repository module<a class="headerlink" href="#module-lumo.utils.repository" title="Permalink to this heading"></a></h2>
<p>Methods about git.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.repository.branch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">branch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Repo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.branch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A context manager class for switching git branches in a given repository.</p>
<p>Example usage:
with branch(repo, branch):
repo.index.commit(’…’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo</strong> (<em>Repo</em>) – The repository object for which the branch will be switched.</p></li>
<li><p><strong>branch</strong> (<em>str</em>) – The name of the branch to switch to.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This class provides a context manager that switches the current branch
to the given branch when entering the context and switches back to the original branch when exiting the context.</p>
<p>If the given branch does not exist in the repository, it will be created.</p>
<p>A lock is obtained on the repository to ensure that
only one instance of this class can switch branches at a time for a given repository.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.check_have_commit">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">check_have_commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.check_have_commit" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the given repository has any commits.</p>
<p>If there are no commits, creates an initial commit that adds all files in the repository and has the message “initial commit”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.dev_branch">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">dev_branch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.dev_branch" title="Permalink to this definition"></a></dt>
<dd><p>Returns the value of the ‘dev_branch’ key from the global configuration dictionary ‘glob’ in the ‘lumo.proc.config’ module.</p>
<p>If the key is not present in the dictionary, returns the default value of ‘lumo_experiments’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The value of the ‘dev_branch’ key from the global configuration dictionary. By default is <code class="docutils literal notranslate"><span class="pre">lumo_experiments</span></code>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.git_archive">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">git_archive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_hex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Commit</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.git_archive" title="Permalink to this definition"></a></dt>
<dd><p>git archive -o</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An Experiment represents this archive operation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.git_checkout">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">git_checkout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_hex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Commit</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.git_checkout" title="Permalink to this definition"></a></dt>
<dd><p>Checkout a specific commit in a Git repository.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo</strong> (<em>git.Repo</em><em>, </em><em>optional</em>) – The Git repository to use. Defaults to None, in which case the repository is loaded using <code class="docutils literal notranslate"><span class="pre">load_repo()</span></code>.</p></li>
<li><p><strong>commit_hex</strong> (<em>str</em><em>, </em><em>optional</em>) – The hash of the commit to check out. Defaults to None.</p></li>
<li><p><strong>commit</strong> (<em>git.Commit</em><em>, </em><em>optional</em>) – The commit object to check out. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The abbreviated hash of the checked-out commit.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>git.InvalidGitRepositoryError</strong> – If the specified repository is invalid or not found.</p></li>
<li><p><strong>git.BadName</strong> – If the specified branch name is invalid or not found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.git_commit">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">git_commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="lumo.trainer.html#lumo.trainer.factory.OptimBuilder.None" title="lumo.trainer.factory.OptimBuilder.None"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.git_commit" title="Permalink to this definition"></a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">repo</span> <span class="n">working</span> <span class="nb">dir</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">&lt;</span><span class="n">branch_name</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;&lt;info&gt;&quot;</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">&lt;</span><span class="n">original</span> <span class="n">branch</span><span class="o">&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo</strong> – </p></li>
<li><p><strong>key</strong> – to avoid duplicate commit, a key value can be passed,</p></li>
</ul>
</dd>
</dl>
<p>commit operation will be perform if <code class="docutils literal notranslate"><span class="pre">key</span></code> hasn’t appeared before.
default value is None, means you can commit as you want without limitation
:param branch_name: commit on which branch, nonexistent branch will be created.
:param info: commit info, a string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>git.Commit object, see gitpython for details.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.git_dir">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">git_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.git_dir" title="Permalink to this definition"></a></dt>
<dd><p>git repository directory
git rev-parse –show-toplevel
:param root:</p>
<p>Returns:</p>
<p>The original command, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rev-parse</span> <span class="pre">--git-dir</span></code>, can not find a right path when the repository is a submodule inside another repository.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.git_enable">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">git_enable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.git_enable" title="Permalink to this definition"></a></dt>
<dd><p>Check if Git is installed and a repository is present.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if Git is installed and a repository is present, False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ImportError</strong> – If the <code class="docutils literal notranslate"><span class="pre">gitpython</span></code> library is not installed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.repository.load_repo">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.repository.</span></span><span class="sig-name descname"><span class="pre">load_repo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.repository.load_repo" title="Permalink to this definition"></a></dt>
<dd><p>Try to load git repository object of a directory.
:param root: str, a directory path, default is the current working dir.
:param if dir is a repository dir:
:param then a git.Repo object will be retured.:
:param if not:
:param some you can type a path to init it:
:param or type ‘!’ to cancel init it.:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>git.Repo object or None if dir not have git repository and cancel to init it.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.safe_io">
<span id="lumo-utils-safe-io-module"></span><h2>lumo.utils.safe_io module<a class="headerlink" href="#module-lumo.utils.safe_io" title="Permalink to this heading"></a></h2>
<p>Safe means Exceptions won’t be raised. When</p>
<ul class="simple">
<li><p>call <code class="docutils literal notranslate"><span class="pre">dump_xxx</span></code> methods, True/False will be returned to indicate success/failed.</p></li>
<li><p>call <code class="docutils literal notranslate"><span class="pre">load_xxx</span></code> methods, None will be returned if something wrong happened.</p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.cached">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">cached</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.cached" title="Permalink to this definition"></a></dt>
<dd><p>A context manager that caches the output of a computation to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<em>str</em>) – The file path to which the cached data will be written.</p>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p><em>str</em> – The file path of the cache file.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>with cached(‘a.txt’) as cache_fn:
with open(cache_fn, ‘w’) as w:
w.write(‘123’)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.dump_json">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">dump_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.dump_json" title="Permalink to this definition"></a></dt>
<dd><p>Dumps the given object to a JSON file at the given file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to be dumped to JSON.</p></li>
<li><p><strong>fn</strong> (<em>str</em>) – The file path to which the JSON data will be written.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The JSON data will be written with an indentation of 2 spaces.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.dump_pkl">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">dump_pkl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_imports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.dump_pkl" title="Permalink to this definition"></a></dt>
<dd><p>Save an object to a pickle file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – The object to save.</p></li>
<li><p><strong>file</strong> (<em>str</em><em> or </em><em>FileIO</em>) – The filename or file object to save to.</p></li>
<li><p><strong>make_path</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True and file is a filename, create the directory path if it does not exist. Defaults to True.</p></li>
<li><p><strong>protocol</strong> (<em>int</em><em>, </em><em>optional</em>) – The pickle protocol to use. Defaults to None.</p></li>
<li><p><strong>fix_imports</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to fix Python 2 to 3 pickle incompatibilities. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NotImplementedError</strong> – If the file type is not supported.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.dump_state_dict">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">dump_state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.dump_state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Saves a PyTorch state dictionary object to disk.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.dump_text">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">dump_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.dump_text" title="Permalink to this definition"></a></dt>
<dd><p>Write the given string to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<em>str</em>) – The string to write.</p></li>
<li><p><strong>fn</strong> (<em>str</em>) – The filename to write to.</p></li>
<li><p><strong>append</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, append the string to the file. Otherwise, overwrite the file. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The filename that was written to.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.dump_yaml">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">dump_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.dump_yaml" title="Permalink to this definition"></a></dt>
<dd><p>Dumps the given object to a YAML file at the given file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to be dumped to YAML.</p></li>
<li><p><strong>fn</strong> (<em>str</em>) – The file path to which the YAML data will be written.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The YAML data will be written with default formatting options.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.filter_unserializable_values">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">filter_unserializable_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.filter_unserializable_values" title="Permalink to this definition"></a></dt>
<dd><p>Recursively filter out unserializable values in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dic</strong> (<em>dict</em>) – The dictionary to be filtered.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The filtered dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.load_json">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.load_json" title="Permalink to this definition"></a></dt>
<dd><p>Loads JSON data from the given file path and returns the resulting object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> – file name</p>
</dd>
</dl>
<p>Returns:</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.load_pkl">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">load_pkl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_imports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ASCII'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.load_pkl" title="Permalink to this definition"></a></dt>
<dd><p>Load an object from a pickle file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em><em> or </em><em>FileIO</em>) – The filename or file object to load from.</p></li>
<li><p><strong>fix_imports</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to fix Python 2 to 3 pickle incompatibilities. Defaults to True.</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>optional</em>) – The character encoding to use. Defaults to “ASCII”.</p></li>
<li><p><strong>errors</strong> (<em>str</em><em>, </em><em>optional</em>) – The error handling scheme to use. Defaults to “strict”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object that was loaded from the file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NotImplementedError</strong> – If the file type is not supported.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.load_state_dict">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">load_state_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.load_state_dict" title="Permalink to this definition"></a></dt>
<dd><p>Loads a PyTorch model checkpoint from the specified file path and returns its state dictionary.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.load_text">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">load_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.load_text" title="Permalink to this definition"></a></dt>
<dd><p>Loads text data from the given file path and returns it as a single string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.load_yaml">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">load_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.load_yaml" title="Permalink to this definition"></a></dt>
<dd><p>Loads YAML data from the given file path and returns the resulting object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.safe_io.safe_getattr">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.safe_io.</span></span><span class="sig-name descname"><span class="pre">safe_getattr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.safe_io.safe_getattr" title="Permalink to this definition"></a></dt>
<dd><p>Get an attribute of an object safely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> (<em>object</em>) – The object to get the attribute from.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – The name of the attribute to get.</p></li>
<li><p><strong>default</strong> (<em>object</em><em>, </em><em>optional</em>) – The value to return if the attribute does not exist. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The value of the attribute if it exists, otherwise the default value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils.screen">
<span id="lumo-utils-screen-module"></span><h2>lumo.utils.screen module<a class="headerlink" href="#module-lumo.utils.screen" title="Permalink to this heading"></a></h2>
<p>Methods about screen single line outputs.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.screen.</span></span><span class="sig-name descname"><span class="pre">ScreenStr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leftoffset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="k">class</span> <span class="nc">representing</span> <span class="n">a</span> <span class="n">string</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">displayed</span> <span class="n">on</span> <span class="n">a</span> <span class="n">console</span> <span class="n">screen</span><span class="o">.</span>

<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">content</span> <span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="n">The</span> <span class="n">string</span> <span class="n">content</span> <span class="n">to</span> <span class="n">be</span> <span class="n">displayed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">screen</span><span class="o">.</span>
    <span class="n">leftoffset</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">characters</span> <span class="n">to</span> <span class="n">shift</span> <span class="n">the</span> <span class="n">content</span> <span class="n">to</span> <span class="n">the</span> <span class="n">left</span><span class="o">.</span>

<span class="n">Notes</span><span class="p">:</span>
    <span class="n">A</span> <span class="n">ScreenStr</span> <span class="n">starting</span> <span class="k">with</span> <span class="s1">&#39;</span>
</pre></div>
</div>
<p>‘ will not overflow, and any string longer than the screen width will be cut off.
If the console supports multiline output (like PyCharm or Jupyter notebook), all the string will be represented.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.a">
<span class="sig-name descname"><span class="pre">a</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.a" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.cacu_offset_">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cacu_offset_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_width</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.cacu_offset_" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the offset for scrolling the text.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.consolo_width">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consolo_width</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.consolo_width" title="Permalink to this definition"></a></dt>
<dd><p>Returns the width of the console.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.debug" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.deltatime">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">deltatime</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.deltatime" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the time elapsed since the last update.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.dt">
<span class="sig-name descname"><span class="pre">dt</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.7</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.dt" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.last">
<span class="sig-name descname"><span class="pre">last</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.last" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.last_width">
<span class="sig-name descname"><span class="pre">last_width</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.last_width" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.left">
<span class="sig-name descname"><span class="pre">left</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.left" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.max_wait">
<span class="sig-name descname"><span class="pre">max_wait</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.max_wait" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.multi_mode">
<span class="sig-name descname"><span class="pre">multi_mode</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.multi_mode" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.set_speed">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_speed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.set_speed" title="Permalink to this definition"></a></dt>
<dd><p>Sets the speed of the text scrolling animation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.split">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.split" title="Permalink to this definition"></a></dt>
<dd><p>Splits a string into two parts.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.t">
<span class="sig-name descname"><span class="pre">t</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.t" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.tostr">
<span class="sig-name descname"><span class="pre">tostr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.ScreenStr.tostr" title="Permalink to this definition"></a></dt>
<dd><p>Returns the string content.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.wait" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lumo.utils.screen.ScreenStr.wait_toggle">
<span class="sig-name descname"><span class="pre">wait_toggle</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#lumo.utils.screen.ScreenStr.wait_toggle" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.screen.get_consolo_width">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.screen.</span></span><span class="sig-name descname"><span class="pre">get_consolo_width</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.get_consolo_width" title="Permalink to this definition"></a></dt>
<dd><p>Returns the width of the current console window</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lumo.utils.screen.inlinetqdm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lumo.utils.screen.</span></span><span class="sig-name descname"><span class="pre">inlinetqdm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">__</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.inlinetqdm" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tqdm</span></code></p>
<p>A subclass of <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> that formats progress bar updates as a single line.</p>
<p>This subclass provides two additional methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- `full_str`: Returns a formatted string representing the full progress bar,
 including the progress bar itself and any additional information (such as elapsed time or estimated remaining time).
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="lumo.utils.screen.inlinetqdm.full_str">
<span class="sig-name descname"><span class="pre">full_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.inlinetqdm.full_str" title="Permalink to this definition"></a></dt>
<dd><p>Returns a formatted string representing the full progress bar, including the progress bar itself and any additional information (such as elapsed time or estimated remaining time).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A formatted string representing the full progress bar.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.screen.support_multiline">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.screen.</span></span><span class="sig-name descname"><span class="pre">support_multiline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.screen.support_multiline" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the current environment supports multiline output in line.
.. rubric:: Notes</p>
<p>This function checks if the current environment supports multiline output.
It returns True if any of the following conditions are met:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">jupyter_core</span></code> module is available (implying that the code is being run in a Jupyter notebook or JupyterLab).</p></li>
<li><p>The width of the console is reported as 0 by <code class="docutils literal notranslate"><span class="pre">shutil.get_terminal_size()</span></code>, which can occur in some non-standard environments or configurations.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PYCHARM_HOSTED</span></code> environment variable is set, which indicates that the code is being run in PyCharm’s integrated console.</p></li>
</ul>
<p>If none of these conditions are met, the function returns False.</p>
</dd></dl>

</section>
<section id="module-lumo.utils.subprocess">
<span id="lumo-utils-subprocess-module"></span><h2>lumo.utils.subprocess module<a class="headerlink" href="#module-lumo.utils.subprocess" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.subprocess.consume">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.subprocess.</span></span><span class="sig-name descname"><span class="pre">consume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Popen</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.subprocess.consume" title="Permalink to this definition"></a></dt>
<dd><p>Consume the standard output and standard error of the specified process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>p</strong> (<em>subprocess.Popen</em>) – The process to consume the output from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lumo.utils.subprocess.run_command">
<span class="sig-prename descclassname"><span class="pre">lumo.utils.subprocess.</span></span><span class="sig-name descname"><span class="pre">run_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">non_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lumo.utils.subprocess.run_command" title="Permalink to this definition"></a></dt>
<dd><p>Executes a command in the shell and captures its standard output and standard error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>) – A string representing the command to execute in the shell.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – A string representing the working directory to execute the command in. Default is None.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – A dictionary representing the environment variables to set for the command. Default is None.</p></li>
<li><p><strong>non_block</strong> (<em>bool</em>) – A flag to indicate whether to run the command in a non-blocking manner. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The return code of the executed command.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-lumo.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-lumo.utils" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, sailist.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>